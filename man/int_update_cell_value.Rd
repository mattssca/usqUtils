% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/int_update_cell_value.R
\name{int_update_cell_value}
\alias{int_update_cell_value}
\title{Update a Single Cell Value in a Data Frame}
\usage{
int_update_cell_value(
  data = metadata,
  sample_id,
  column,
  new_value,
  sample_id_col = "sample_id",
  validate_type = TRUE,
  log_changes = TRUE,
  reason = NULL
)
}
\arguments{
\item{data}{A data frame to operate on. Defaults to \code{metadata}.}

\item{sample_id}{The sample identifier value to match in the sample ID column (character).}

\item{column}{The name of the column to update (character).}

\item{new_value}{The new value to set in the specified cell.}

\item{sample_id_col}{The name of the column containing sample IDs. Defaults to \code{"sample_id"}.}

\item{validate_type}{Logical; if \code{TRUE}, validates that the new value matches the column type.
Default is \code{TRUE}.}

\item{log_changes}{Logical; if \code{TRUE}, logs the change to the global \code{column_change_log} list.
Default is \code{TRUE}.}

\item{reason}{Optional; reason for the change (character). Default is \code{NULL}.}
}
\value{
The updated data frame with the modified cell value.
}
\description{
This helper function updates a specific cell value in a data frame with validation,
type checking, and change logging. Row identification is done via a specified sample ID column.
Changes are logged to the global \code{column_change_log} list used by \code{process_column()}.
}
\details{
\itemize{
\item Identifies rows using the specified sample ID column (default: \code{"sample_id"})
\item Validates that the row and column exist
\item Checks that the new value is compatible with the column's data type
\item For factors, checks if the new value is a valid level
\item For booleans, accepts logical values or strings like "TRUE"/"FALSE"
\item Logs changes with old value, new value, and timestamp to \code{column_change_log}
\item Cell-level changes are stored under a "cell_updates" key within \code{column_change_log}
}
}
\examples{
# Update a boolean value (using default sample_id column)
metadata <- update_cell_value(
  data = metadata,
  sample_id = "19KFU0046",
  column = "sq_metaplasia",
  new_value = TRUE,
  reason = "Correction based on pathology review"
)

# Update using a custom sample ID column name
metadata <- update_cell_value(
  data = metadata,
  sample_id = "X18KFU0001",
  column = "grade",
  new_value = "G2",
  sample_id_col = "patient_id"
)

}
